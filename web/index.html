<!DOCTYPE html>
<html>
<head>
  <base href="/" />

  <meta charset="UTF-8" />
  <meta content="IE=Edge" http-equiv="X-UA-Compatible" />
  <meta name="description" content="A Flutter Web Element embedding demo." />

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="apple-mobile-web-app-title" content="Flutter Element embedding" />
  <link rel="apple-touch-icon" href="icons/Icon-192.png" />
  <link rel="preload" as="image" href="icons/unsplash-x9WGMWwp1NM.png" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="icons/favicon.png" />

  <title>Element embedding</title>
  <link rel="manifest" href="manifest.json" />

  <!-- This script adds the flutter initialization JS code -->
  <script src="flutter.js" defer></script>

  <link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<body>
  <h1>Testing</h1>
  <p>That was easy</p>
  <div id="flutter_target" style="width:500px; height:500px"></div>

<script>
      window.addEventListener("load", function (ev) {
        // Embed flutter into div#flutter_target
        let target = document.querySelector("#flutter_target");
        _flutter.loader.loadEntrypoint({
          onEntrypointLoaded: async function (engineInitializer) {
            let appRunner = await engineInitializer.initializeEngine({
              hostElement: target,
            });
            await appRunner.runApp();
          },
        });
      });

      // Sets up a channel to JS-interop with Flutter
(function() {
  "use strict";
  // This function will be called from Flutter when it prepares the JS-interop.
  window._stateSet = function () {
    console.log("_stateSet())");
    window._stateSet = function () {
      console.log("Call _stateSet only once!");
    };

    // The state of the flutter app
    let appState = window._appState;

    let incrementButton = document.querySelector("#login");
    incrementButton.addEventListener("click", (event) => {
      appState.login("lindsay", "");
    });
  };
}());
    </script>

  <button id="login">Login</button>
<script src="js/demo-js-interop.js" defer></script>
<script src="js/demo-css-fx.js" defer></script>
</body>
</html>